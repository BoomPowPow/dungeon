!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Dungeon=e():t.Dungeon=e()}(window,function(){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=17)}([function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={EMPTY:0,WALL:1,FLOOR:2,DOOR:3}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.debugRoomGrid=function(t){var e=t.roomGrid.map(function(t){return t.map(function(t){return(""+t.length).padStart(2)})});console.log(e.map(function(t){return t.join(" ")}).join("\n"))},e.debugHtmlMap=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object.assign({},{empty:" ",emptyColor:"rgb(0, 0, 0)",wall:"#",wallColor:"rgb(255, 0, 0)",floor:"_",floorColor:"rgb(210, 210, 210)",door:".",doorColor:"rgb(0, 0, 255)",fontSize:"15px"},e);var o=t.getMappedTiles({empty:'<span style="color: '+e.emptyColor+'">'+e.empty+"</span>",floor:'<span style="color: '+e.floorColor+'">'+e.floor+"</span>",door:'<span style="color: '+e.doorColor+'">'+e.door+"</span>",wall:'<span style="color: '+e.wallColor+'">'+e.wall+"</span>"}),n=document.createElement("pre");return n.innerHTML=o.map(function(t){return t.join(" ")}).join("\n"),n},e.debugMap=function(t){var e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o=Object.assign({},{empty:" ",emptyColor:"rgb(0, 0, 0)",wall:"#",wallColor:"rgb(255, 0, 0)",floor:"_",floorColor:"rgb(210, 210, 210)",door:".",doorColor:"rgb(0, 0, 255)",fontSize:"15px"},o);var r="",i=[];r+="Dungeon: the console window should be big enough to see all of the guide on the next line:\n",r+="%c|"+"=".repeat(2*t.width-2)+"|\n\n",i.push("font-size: "+o.fontSize);for(var a=0;a<t.height;a+=1){for(var u=0;u<t.width;u+=1){var h=t.tiles[a][u];h===n.default.EMPTY?(r+="%c"+o.empty,i.push("color: "+o.emptyColor+"; font-size: "+o.fontSize)):h===n.default.WALL?(r+="%c"+o.wall,i.push("color: "+o.wallColor+"; font-size: "+o.fontSize)):h===n.default.FLOOR?(r+="%c"+o.floor,i.push("color: "+o.floorColor+"; font-size: "+o.fontSize)):h===n.default.DOOR&&(r+="%c"+o.door,i.push("color: "+o.doorColor+"; font-size: "+o.fontSize)),r+=" "}r+="\n"}(e=console).log.apply(e,[r].concat(i))};var n=function(t){return t&&t.__esModule?t:{default:t}}(o(3))},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(o(3));var i=function(){function t(e,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e,this.height=o,this.setPosition(0,0),this.doors=[],this.tiles=[];for(var n=0;n<this.height;n++){for(var i=[],a=0;a<this.width;a++)0==n||n==this.height-1||0==a||a==this.width-1?i.push(r.default.WALL):i.push(r.default.FLOOR);this.tiles.push(i)}}return n(t,[{key:"setPosition",value:function(t,e){this.x=t,this.y=e,this.left=t,this.right=t+(this.width-1),this.top=e,this.bottom=e+(this.height-1),this.centerX=t+Math.floor(this.width/2),this.centerY=e+Math.floor(this.height/2)}},{key:"getDoorLocations",value:function(){for(var t=[],e=0;e<this.height;e++)for(var o=0;o<this.width;o++)this.tiles[e][o]==r.default.DOOR&&t.push({x:o,y:e});return t}},{key:"overlaps",value:function(t){return!(this.right<t.left)&&(!(this.left>t.right)&&(!(this.bottom<t.top)&&!(this.top>t.bottom)))}},{key:"isConnectedTo",value:function(t){for(var e=this.getDoorLocations(),o=0;o<e.length;o++){var n=e[o];if(n.x+=this.x,n.y+=this.y,n.x-=t.x,n.y-=t.y,!(n.x<0||n.x>t.width-1||n.y<0||n.y>t.height-1)&&t.tiles[n.y][n.x]==r.default.DOOR)return!0}return!1}}]),t}();e.default=i},function(t,e){},function(t,e,o){var n;!function(r,i){var a,u=this,h=256,f=6,s="random",l=i.pow(h,f),c=i.pow(2,52),d=2*c,g=h-1;function v(t,e,o){var n=[],v=y(function t(e,o){var n,r=[],i=typeof e;if(o&&"object"==i)for(n in e)try{r.push(t(e[n],o-1))}catch(t){}return r.length?r:"string"==i?e:e+"\0"}((e=1==e?{entropy:!0}:e||{}).entropy?[t,x(r)]:null==t?function(){try{var t;return a&&(t=a.randomBytes)?t=t(h):(t=new Uint8Array(h),(u.crypto||u.msCrypto).getRandomValues(t)),x(t)}catch(t){var e=u.navigator,o=e&&e.plugins;return[+new Date,u,o,u.screen,x(r)]}}():t,3),n),p=new function(t){var e,o=t.length,n=this,r=0,i=n.i=n.j=0,a=n.S=[];o||(t=[o++]);for(;r<h;)a[r]=r++;for(r=0;r<h;r++)a[r]=a[i=g&i+t[r%o]+(e=a[r])],a[i]=e;(n.g=function(t){for(var e,o=0,r=n.i,i=n.j,a=n.S;t--;)e=a[r=g&r+1],o=o*h+a[g&(a[r]=a[i=g&i+e])+(a[i]=e)];return n.i=r,n.j=i,o})(h)}(n),w=function(){for(var t=p.g(f),e=l,o=0;t<c;)t=(t+o)*h,e*=h,o=p.g(1);for(;t>=d;)t/=2,e/=2,o>>>=1;return(t+o)/e};return w.int32=function(){return 0|p.g(4)},w.quick=function(){return p.g(4)/4294967296},w.double=w,y(x(p.S),r),(e.pass||o||function(t,e,o,n){return n&&(n.S&&m(n,p),t.state=function(){return m(p,{})}),o?(i[s]=t,e):t})(w,v,"global"in e?e.global:this==i,e.state)}function m(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function y(t,e){for(var o,n=t+"",r=0;r<n.length;)e[g&r]=g&(o^=19*e[g&r])+n.charCodeAt(r++);return x(e)}function x(t){return String.fromCharCode.apply(0,t)}if(i["seed"+s]=v,y(i.random(),r),"object"==typeof t&&t.exports){t.exports=v;try{a=o(6)}catch(t){}}else void 0===(n=function(){return v}.call(e,o,e,t))||(t.exports=n)}([],Math)},function(t,e,o){(function(t){var n;!function(t,r,i){function a(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function u(t,e){var o=new function(t){var e=this,o="";e.next=function(){var t=e.b,o=e.c,n=e.d,r=e.a;return t=t<<25^t>>>7^o,o=o-n|0,n=n<<24^n>>>8^r,r=r-t|0,e.b=t=t<<20^t>>>12^o,e.c=o=o-n|0,e.d=n<<16^o>>>16^r,e.a=r-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):o+=t;for(var n=0;n<o.length+20;n++)e.b^=0|o.charCodeAt(n),e.next()}(t),n=e&&e.state,r=function(){return(o.next()>>>0)/4294967296};return r.double=function(){do{var t=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=o.next,r.quick=r,n&&("object"==typeof n&&a(n,o),r.state=function(){return a(o,{})}),r}r&&r.exports?r.exports=u:o(0)&&o(1)?void 0===(n=function(){return u}.call(e,o,e,r))||(r.exports=n):this.tychei=u}(0,"object"==typeof t&&t,o(0))}).call(this,o(2)(t))},function(t,e,o){(function(t){var n;!function(t,r,i){function a(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function u(t,e){null==t&&(t=+new Date);var o=new function(t){var e=this;e.next=function(){var t,o,n=e.w,r=e.X,i=e.i;return e.w=n=n+1640531527|0,o=r[i+34&127],t=r[i=i+1&127],o^=o<<13,t^=t<<17,o^=o>>>15,t^=t>>>12,o=r[i]=o^t,e.i=i,o+(n^n>>>16)|0},function(t,e){var o,n,r,i,a,u=[],h=128;for(e===(0|e)?(n=e,e=null):(e+="\0",n=0,h=Math.max(h,e.length)),r=0,i=-32;i<h;++i)e&&(n^=e.charCodeAt((i+32)%e.length)),0===i&&(a=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,i>=0&&(a=a+1640531527|0,r=0==(o=u[127&i]^=n+a)?r+1:0);for(r>=128&&(u[127&(e&&e.length||0)]=-1),r=127,i=512;i>0;--i)n=u[r+34&127],o=u[r=r+1&127],n^=n<<13,o^=o<<17,n^=n>>>15,o^=o>>>12,u[r]=n^o;t.w=a,t.X=u,t.i=r}(e,t)}(t),n=e&&e.state,r=function(){return(o.next()>>>0)/4294967296};return r.double=function(){do{var t=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=o.next,r.quick=r,n&&(n.X&&a(n,o),r.state=function(){return a(o,{})}),r}r&&r.exports?r.exports=u:o(0)&&o(1)?void 0===(n=function(){return u}.call(e,o,e,r))||(r.exports=n):this.xor4096=u}(0,"object"==typeof t&&t,o(0))}).call(this,o(2)(t))},function(t,e,o){(function(t){var n;!function(t,r,i){function a(t,e){return e.x=t.x.slice(),e.i=t.i,e}function u(t,e){null==t&&(t=+new Date);var o=new function(t){var e=this;e.next=function(){var t,o,n=e.x,r=e.i;return t=n[r],o=(t^=t>>>7)^t<<24,o^=(t=n[r+1&7])^t>>>10,o^=(t=n[r+3&7])^t>>>3,o^=(t=n[r+4&7])^t<<7,t=n[r+7&7],o^=(t^=t<<13)^t<<9,n[r]=o,e.i=r+1&7,o},function(t,e){var o,n=[];if(e===(0|e))n[0]=e;else for(e=""+e,o=0;o<e.length;++o)n[7&o]=n[7&o]<<15^e.charCodeAt(o)+n[o+1&7]<<13;for(;n.length<8;)n.push(0);for(o=0;o<8&&0===n[o];++o);for(8==o?n[7]=-1:n[o],t.x=n,t.i=0,o=256;o>0;--o)t.next()}(e,t)}(t),n=e&&e.state,r=function(){return(o.next()>>>0)/4294967296};return r.double=function(){do{var t=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=o.next,r.quick=r,n&&(n.x&&a(n,o),r.state=function(){return a(o,{})}),r}r&&r.exports?r.exports=u:o(0)&&o(1)?void 0===(n=function(){return u}.call(e,o,e,r))||(r.exports=n):this.xorshift7=u}(0,"object"==typeof t&&t,o(0))}).call(this,o(2)(t))},function(t,e,o){(function(t){var n;!function(t,r,i){function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function u(t,e){var o=new function(t){var e=this,o="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:o+=t;for(var n=0;n<o.length+64;n++)e.x^=0|o.charCodeAt(n),n==o.length&&(e.d=e.x<<10^e.x>>>4),e.next()}(t),n=e&&e.state,r=function(){return(o.next()>>>0)/4294967296};return r.double=function(){do{var t=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=o.next,r.quick=r,n&&("object"==typeof n&&a(n,o),r.state=function(){return a(o,{})}),r}r&&r.exports?r.exports=u:o(0)&&o(1)?void 0===(n=function(){return u}.call(e,o,e,r))||(r.exports=n):this.xorwow=u}(0,"object"==typeof t&&t,o(0))}).call(this,o(2)(t))},function(t,e,o){(function(t){var n;!function(t,r,i){function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function u(t,e){var o=new function(t){var e=this,o="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:o+=t;for(var n=0;n<o.length+64;n++)e.x^=0|o.charCodeAt(n),e.next()}(t),n=e&&e.state,r=function(){return(o.next()>>>0)/4294967296};return r.double=function(){do{var t=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=o.next,r.quick=r,n&&("object"==typeof n&&a(n,o),r.state=function(){return a(o,{})}),r}r&&r.exports?r.exports=u:o(0)&&o(1)?void 0===(n=function(){return u}.call(e,o,e,r))||(r.exports=n):this.xor128=u}(0,"object"==typeof t&&t,o(0))}).call(this,o(2)(t))},function(t,e,o){(function(t){var n;!function(t,r,i){function a(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function u(t,e){var o=new function(t){var e=this,o=function(){var t=4022871197;return function(e){e=e.toString();for(var o=0;o<e.length;o++){var n=.02519603282416938*(t+=e.charCodeAt(o));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)}}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=o(" "),e.s1=o(" "),e.s2=o(" "),e.s0-=o(t),e.s0<0&&(e.s0+=1),e.s1-=o(t),e.s1<0&&(e.s1+=1),e.s2-=o(t),e.s2<0&&(e.s2+=1),o=null}(t),n=e&&e.state,r=o.next;return r.int32=function(){return 4294967296*o.next()|0},r.double=function(){return r()+1.1102230246251565e-16*(2097152*r()|0)},r.quick=r,n&&("object"==typeof n&&a(n,o),r.state=function(){return a(o,{})}),r}r&&r.exports?r.exports=u:o(0)&&o(1)?void 0===(n=function(){return u}.call(e,o,e,r))||(r.exports=n):this.alea=u}(0,"object"==typeof t&&t,o(0))}).call(this,o(2)(t))},function(t,e,o){var n=o(13),r=o(12),i=o(11),a=o(10),u=o(9),h=o(8),f=o(7);f.alea=n,f.xor128=r,f.xorwow=i,f.xorshift7=a,f.xor4096=u,f.tychei=h,t.exports=f},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(o(14));var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rng=(0,r.default)(e)}return n(t,[{key:"randomInteger",value:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=o.onlyOdd,r=void 0!==n&&n,i=o.onlyEven,a=void 0!==i&&i;return r?this.randomOddInteger(t,e):a?this.randomEvenInteger(t,e):Math.floor(this.rng()*(e-t+1)+t)}},{key:"randomEvenInteger",value:function(t,e){t%2!=0&&t<e&&t++,e%2!=0&&e>t&&e--;var o=(e-t)/2;return 2*Math.floor(this.rng()*(o+1))+t}},{key:"randomOddInteger",value:function(t,e){t%2==0&&t++,e%2==0&&e--;var o=(e-t)/2;return 2*Math.floor(this.rng()*(o+1))+t}},{key:"randomPick",value:function(t){return t[this.randomInteger(0,t.length-1)]}}]),t}();e.default=i},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(o.push(a.value),!e||o.length!==e);n=!0);}catch(t){r=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(r)throw i}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),i=f(o(15)),a=f(o(5)),u=f(o(3)),h=o(4);function f(t){return t&&t.__esModule?t:{default:t}}var s={width:50,height:50,randomSeed:void 0,doorPadding:1,rooms:{width:{min:5,max:15,onlyOdd:!1,onlyEven:!1},height:{min:5,max:15,onlyOdd:!1,onlyEven:!1},maxArea:150,maxRooms:50}},l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var o=e.rooms||{};o.width=Object.assign({},s.rooms.width,o.width),o.height=Object.assign({},s.rooms.height,o.height),o.maxArea=o.maxArea||s.rooms.maxArea,o.maxRooms=o.maxRooms||s.rooms.maxRooms,o.width.min<3&&(o.width.min=3),o.height.min<3&&(o.height.min=3),o.width.max<o.width.min&&(o.width.max=o.width.min),o.height.max<o.height.min&&(o.height.max=o.height.min);var n=o.width.min*o.height.min;o.maxArea<n&&(o.maxArea=n),this.doorPadding=e.doorPadding||s.doorPadding,this.width=e.width||s.width,this.height=e.height||s.height,this.roomConfig=o,this.rooms=[],this.r=new i.default(e.randomSeed),this.roomGrid=[],this.generate(),this.tiles=this.getTiles()}return r(t,[{key:"drawToConsole",value:function(t){(0,h.debugMap)(this,t)}},{key:"drawToHtml",value:function(t){return(0,h.debugHtmlMap)(this,t)}},{key:"generate",value:function(){this.rooms=[],this.roomGrid=[];for(var t=0;t<this.height;t++){this.roomGrid.push([]);for(var e=0;e<this.width;e++)this.roomGrid[t].push([])}var o=this.createRandomRoom();o.setPosition(Math.floor(this.width/2)-Math.floor(o.width/2),Math.floor(this.height/2)-Math.floor(o.height/2)),this.addRoom(o);for(var n=5*this.roomConfig.maxRooms;this.rooms.length<this.roomConfig.maxRooms&&n>0;)this.generateRoom(),n-=1}},{key:"getRoomAt",value:function(t,e){return t<0||e<0||t>=this.width||e>=this.height?null:this.roomGrid[e][t][0]}},{key:"getMappedTiles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=Object.assign({},{empty:0,wall:1,floor:2,door:3},t),this.tiles.map(function(e){return e.map(function(e){return e===u.default.EMPTY?t.empty:e===u.default.WALL?t.wall:e===u.default.FLOOR?t.floor:e===u.default.DOOR?t.door:void 0})})}},{key:"addRoom",value:function(t){if(!this.canFitRoom(t))return!1;this.rooms.push(t);for(var e=t.top;e<=t.bottom;e++)for(var o=t.left;o<=t.right;o++)this.roomGrid[e][o].push(t);return!0}},{key:"canFitRoom",value:function(t){if(t.x<0||t.x+t.width>this.width-1)return!1;if(t.y<0||t.y+t.height>this.height-1)return!1;for(var e=0;e<this.rooms.length;e++)if(t.overlaps(this.rooms[e]))return!1;return!0}},{key:"createRandomRoom",value:function(){var t=0,e=0,o=0,n=this.roomConfig;do{o=(t=this.r.randomInteger(n.width.min,n.width.max,{onlyEven:n.width.onlyEven,onlyOdd:n.width.onlyOdd}))*(e=this.r.randomInteger(n.height.min,n.height.max,{onlyEven:n.height.onlyEven,onlyOdd:n.height.onlyOdd}))}while(o>n.maxArea);return new a.default(t,e)}},{key:"generateRoom",value:function(){for(var t=this.createRandomRoom(),e=150;e>0;){var o=this.findRoomAttachment(t);if(t.setPosition(o.x,o.y),this.addRoom(t)){var r=this.findNewDoorLocation(t,o.target),i=n(r,2),a=i[0],u=i[1];this.addDoor(a),this.addDoor(u);break}e-=1}}},{key:"getTiles",value:function(){for(var t=Array(this.height),e=0;e<this.height;e++){t[e]=Array(this.width);for(var o=0;o<this.width;o++)t[e][o]=u.default.EMPTY}for(var n=0;n<this.rooms.length;n++)for(var r=this.rooms[n],i=0;i<r.height;i++)for(var a=0;a<r.width;a++)t[i+r.y][a+r.x]=r.tiles[i][a];return t}},{key:"getPotentiallyTouchingRooms",value:function(t){for(var e=[],o=function(o,n,r){for(var i=r[n][o],a=0;a<i.length;a++)if(i[a]!=t&&e.indexOf(i[a])<0){var u=o-i[a].x,h=n-i[a].y;(u>0&&u<i[a].width-1||h>0&&h<i[a].height-1)&&e.push(i[a])}},n=t.x+1;n<t.x+t.width-1;n++)o(n,t.y,this.roomGrid),o(n,t.y+t.height-1,this.roomGrid);for(var r=t.y+1;r<t.y+t.height-1;r++)o(t.x,r,this.roomGrid),o(t.x+t.width-1,r,this.roomGrid);return e}},{key:"findNewDoorLocation",value:function(t,e){var o={x:-1,y:-1},n={x:-1,y:-1};return t.y===e.y-t.height?(o.x=n.x=this.r.randomInteger(Math.floor(Math.max(e.left,t.left)+this.doorPadding),Math.floor(Math.min(e.right,t.right)-this.doorPadding)),o.y=t.y+t.height-1,n.y=e.y):t.x==e.x-t.width?(o.x=t.x+t.width-1,n.x=e.x,o.y=n.y=this.r.randomInteger(Math.floor(Math.max(e.top,t.top)+this.doorPadding),Math.floor(Math.min(e.bottom,t.bottom)-this.doorPadding))):t.x==e.x+e.width?(o.x=t.x,n.x=e.x+e.width-1,o.y=n.y=this.r.randomInteger(Math.floor(Math.max(e.top,t.top)+this.doorPadding),Math.floor(Math.min(e.bottom,t.bottom)-this.doorPadding))):t.y==e.y+e.height&&(o.x=n.x=this.r.randomInteger(Math.floor(Math.max(e.left,t.left)+this.doorPadding),Math.floor(Math.min(e.right,t.right)-this.doorPadding)),o.y=t.y,n.y=e.y+e.height-1),[o,n]}},{key:"findRoomAttachment",value:function(t){var e=this.r.randomPick(this.rooms),o=0,n=0,r=2*this.doorPadding;switch(this.r.randomInteger(0,3)){case 0:o=this.r.randomInteger(e.left-(t.width-1)+r,e.right-r),n=e.top-t.height;break;case 1:o=e.left-t.width,n=this.r.randomInteger(e.top-(t.height-1)+r,e.bottom-r);break;case 2:o=e.right+1,n=this.r.randomInteger(e.top-(t.height-1)+r,e.bottom-r);break;case 3:o=this.r.randomInteger(e.left-(t.width-1)+r,e.right-r),n=e.bottom+1}return{x:o,y:n,target:e}}},{key:"addDoor",value:function(t){for(var e=this.roomGrid[t.y][t.x],o=0;o<e.length;o++){var n=e[o],r=t.x-n.x,i=t.y-n.y;n.tiles[i][r]=u.default.DOOR}}}]),t}();e.default=l},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(o(16));e.default=n.default}]).default});
//# sourceMappingURL=dungeon.min.js.map